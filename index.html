<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <link rel="icon" 
      type="image/png" 
      href="https://i.pinimg.com/originals/03/11/20/0311203c3a6e3808bff8d23daf44a4af.png">

  <style>
    html, body {margin: 0; height: 100%; overflow: hidden}
    body {font-family: Arial, Helvetica, sans-serif;} * {box-sizing: border-box;}

  </style>

  <title>Test</title>
  <meta name="description" content="Test">
  <meta name="author" content="Hilobrain">

  <link rel="stylesheet" href="css/index.css">
  
  <!-- <script defer src="https://use.fontawesome.com/releases/v5.1.1/js/all.js" integrity="sha384-BtvRZcyfv4r0x/phJt9Y9HhnN5ur1Z+kZbKVgzVBAlQZX4jvAuImlIz+bG7TS00a" crossorigin="anonymous"></script> -->
  <script src="https://kit.fontawesome.com/7e09682c01.js" crossorigin="anonymous"></script>
</head>

<body>
  <!-- <script language="javascript" type="text/javascript" src="js/components/app.js"></script> -->
  <script language="javascript" type="text/javascript" src="web3.min.js"></script>
  <script language="javascript" type="text/javascript" src="ABI.json"></script>
  <script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script type="text/javascript">

    function get_GitHub_canvas() {
        $(document).ready(function() {
          var url = 'https://raw.githubusercontent.com/Hilobrain/PyGitHub/master/test_file.txt';
        
          $.get(url, function(data) { 
              $('#code').text(data) ; 
              console.log(data) ; 
              base64_canvas = data ;  
            }, 'text') ; 
          }) ;  
          }

      const web3 = new Web3(window.web3.currentProvider) ;

      //addresses
      const contract_address = "0xDfAE8522Fec1c8462954211A5e8aa039a3D22d2a" ; 

      //contracts
      var contract = new web3.eth.Contract(ABI, contract_address) ;

      //user address
      var account ;

      //constants
      const net = "3" ;

      window.addEventListener('load', async () => {
        // Modern dapp browsers...
        if (window.ethereum) {
          window.web3 = new Web3(ethereum);
          try {
            // Request account access if needed
            await ethereum.enable();
            // Acccounts now exposed
            web3.eth.getAccounts().then(function(value) {account = value[0]}) ;
          } catch (error) {
            // User denied account access...
          }
        }
        // Legacy dapp browsers...
        else if (window.web3) {
          window.web3 = new Web3(web3.currentProvider);
          // Acccounts always exposed
          web3.eth.getAccounts().then(function(value) {account = value[0]}) ;
        }
        // Non-dapp browsers...
        else {
          console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');
        }
      });
      
      get_GitHub_canvas() ;
  </script>

</body>
</html>